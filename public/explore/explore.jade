.container.main-view

  .row
  
    .col-lg-12
    
      .row
        .col-lg-2
          label Dimensions
          ul.list-unstyled
            li.border-top(ng-repeat="dimension in dimensions")
              .checkbox
                label
                  input(type="checkbox", ng-model="dimension.active")
                  div(ng-class="{ 'text-strong' : query.hasOwnProperty(dimension.field) }") {{dimension.label}}
                  span.small(ng-show="dimension.subgroup") {{dimension.subgroup}}
        
        .col-lg-10
          .clearfix.margin-bottom
            a.btn-xs.btn.btn-danger.pull-right(ng-click="clear()") Clear all
      
          form
            .row
              .col-lg-3(ng-repeat='dimension in activeDimensions')
                div(ng-switch="dimension.type")
                  div(ng-switch-when="facet", facet="", label="{{dimension.label}}", subgroup="{{dimension.subgroup}}", data-model="dimension.antani", field="{{dimension.field}}", suggestions='{{dimension.suggestions}}', data-query='query')
                  div(ng-switch-when="number")
                    .form-group    
                      label {{dimension.label}} 
                        span.text-muted(ng-show="dimension.subgroup") {{dimension.subgroup}} 
                      input.input-sm.form-control(type="text", ng-model="query[dimension.field]", ng-model-options="{debounce:1000}")
                  div(ng-switch-when="text")
                    .form-group    
                      label {{dimension.label}} 
                        span.text-muted(ng-show="dimension.subgroup") {{dimension.subgroup}} 
                      input.input-sm.form-control(type="text", ng-model="query[dimension.field]", ng-model-options="{debounce:1000}")
        
    .col-lg-12 
    
      strong Your filters
      p
        .pill(ng-repeat="(k,v) in query") 
          .pill-dimension {{k.split('_').join(' ')}}
          .pill-value
            span(ng-show="v | isArray" ng-repeat="value in v")
              span(ng-show="$index > 0") or 
              strong {{value}} 
            strong(ng-hide="v | isArray") {{v}}
          .pill-value.border-left
            a.text-danger(ng-click="removeFromQuery(k)", data-toggle="tooltip", title="Remove")
              i.fa.fa-trash-o

        //button.btn.btn-success.pull-right(ng-click="search()", type="submit", tabindex="1") Search
            
      div.text-muted(ng-show="!entries.length && untouched && !searching") Use the fields on the left and press Enter or click the Search button to start searching


      div(ng-show="!noResults && entries.length && !searching")
        
        hr
      
        div.clearfix
          p.pull-left.text-large
            strong {{entries.length}} 
            | matching results
          button#export-button.btn.btn-default.btn-sm.pull-right(data-loading-text="Loading...", ng-click="export()", ng-disabled="!entries.length")
            i.fa.fa-download.margin-right
            | Export results
        
      .list-group.margin-top(ng-show="!searching")
        a.list-group-item(ng-repeat="entry in entries", ng-href="#/entries/{{entry.index}}")
          h4.list-group-item-heading {{entry.fullName}}
          p.list-group-item-text {{entry.biography.slice(0,200)}} ...
        
      div(ng-show="noResults && !searching")
        p No results
      
      div.alert.alert-warning(ng-show="searching")
        p 
          i.fa.fa-refresh.fa-spin.margin-right
          | Searching...
